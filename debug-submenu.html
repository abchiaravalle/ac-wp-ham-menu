<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Submenu Issues</title>
    <link rel="stylesheet" href="assets/style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        .debug-info {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .debug-info h3 {
            margin-top: 0;
            color: #333;
        }
        .debug-log {
            background: #f8f8f8;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="debug-info">
        <h1>Submenu Debug Test</h1>
        <p>Testing submenu functionality to identify and fix issues:</p>
        <ul>
            <li>Issue 1: Activating on hover instead of click only</li>
            <li>Issue 2: First slot appears blank</li>
            <li>Issue 3: No back button when submenu opens</li>
        </ul>
    </div>

    <div class="debug-info">
        <h3>Test Menu</h3>
        <div class="ac-wp-ham-container" id="debug-menu">
            <button class="ac-wp-ham-toggle" aria-label="Toggle Menu" aria-expanded="false">
                <span class="ac-wp-ham-icon">
                    <span class="ac-wp-ham-line"></span>
                    <span class="ac-wp-ham-line"></span>
                    <span class="ac-wp-ham-line"></span>
                </span>
            </button>
            
            <nav class="ac-wp-ham-menu" role="navigation" aria-hidden="true">
                <div class="ac-wp-ham-menu-inner">
                    <ul class="ac-wp-ham-nav-list">
                        <li class="menu-item menu-item-1">
                            <a href="#home">Home</a>
                        </li>
                        <li class="menu-item menu-item-2">
                            <a href="#about">About</a>
                        </li>
                        <li class="menu-item menu-item-has-children menu-item-3">
                            <a href="#services">Services <span class="ac-wp-ham-submenu-arrow" aria-hidden="true">›</span></a>
                            <ul class="ac-wp-ham-submenu ac-wp-ham-submenu-level-0">
                                <li class="menu-item menu-item-4">
                                    <a href="#web-design">Web Design</a>
                                </li>
                                <li class="menu-item menu-item-5">
                                    <a href="#development">Development</a>
                                </li>
                                <li class="menu-item menu-item-6">
                                    <a href="#seo">SEO Services</a>
                                </li>
                            </ul>
                        </li>
                        <li class="menu-item menu-item-has-children menu-item-7">
                            <a href="#products">Products <span class="ac-wp-ham-submenu-arrow" aria-hidden="true">›</span></a>
                            <ul class="ac-wp-ham-submenu ac-wp-ham-submenu-level-0">
                                <li class="menu-item menu-item-8">
                                    <a href="#software">Software</a>
                                </li>
                                <li class="menu-item menu-item-9">
                                    <a href="#hardware">Hardware</a>
                                </li>
                            </ul>
                        </li>
                        <li class="menu-item menu-item-10">
                            <a href="#contact">Contact</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
    </div>

    <div class="debug-info">
        <h3>Debug Log</h3>
        <button onclick="clearLog()">Clear Log</button>
        <div id="debug-log" class="debug-log"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="assets/script.js"></script>
    
    <script>
        // Debug logging
        function log(message) {
            const logDiv = document.getElementById('debug-log');
            const timestamp = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${timestamp}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        function clearLog() {
            document.getElementById('debug-log').innerHTML = '';
        }

        // Monitor menu interactions
        document.addEventListener('DOMContentLoaded', function() {
            log('DOM loaded, starting debug monitoring...');
            
            const container = document.getElementById('debug-menu');
            const submenuTriggers = container.querySelectorAll('.menu-item-has-children > a');
            
            log(`Found ${submenuTriggers.length} submenu triggers`);
            
            submenuTriggers.forEach((trigger, index) => {
                const parentLi = trigger.parentElement;
                const submenu = parentLi.querySelector('.ac-wp-ham-submenu');
                
                log(`Trigger ${index}: ${trigger.textContent.trim()}`);
                log(`  - Has submenu: ${!!submenu}`);
                if (submenu) {
                    log(`  - Submenu items: ${submenu.querySelectorAll('li').length}`);
                }
                
                // Monitor clicks
                trigger.addEventListener('click', function(e) {
                    log(`CLICK: ${trigger.textContent.trim()}`);
                });
                
                // Monitor hover events
                trigger.addEventListener('mouseenter', function(e) {
                    log(`HOVER ENTER: ${trigger.textContent.trim()}`);
                });
                
                trigger.addEventListener('mouseleave', function(e) {
                    log(`HOVER LEAVE: ${trigger.textContent.trim()}`);
                });
            });
            
            // Monitor submenu state changes
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                        const target = mutation.target;
                        if (target.classList.contains('ac-wp-ham-submenu')) {
                            const isActive = target.classList.contains('ac-wp-ham-submenu-active');
                            log(`SUBMENU STATE CHANGE: ${isActive ? 'OPENED' : 'CLOSED'}`);
                            
                            if (isActive) {
                                const backButton = target.querySelector('.ac-wp-ham-back-button');
                                log(`  - Back button present: ${!!backButton}`);
                                if (backButton) {
                                    log(`  - Back button text: "${backButton.textContent.trim()}"`);
                                }
                                
                                const items = target.querySelectorAll('li');
                                log(`  - Total items in submenu: ${items.length}`);
                                items.forEach((item, idx) => {
                                    log(`    ${idx}: ${item.textContent.trim()}`);
                                });
                            }
                        }
                    }
                });
            });
            
            // Observe all submenus
            container.querySelectorAll('.ac-wp-ham-submenu').forEach(submenu => {
                observer.observe(submenu, { attributes: true, attributeFilter: ['class'] });
            });
        });
    </script>
</body>
</html>